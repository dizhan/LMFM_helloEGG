package  {  import flash.display.*;  import flash.events.*;                      //for event handling  import flash.net.Socket;                    //Sockets  import com.adobe.serialization.json.*   ;   //as3corelib JSON support    public class DisplayWindow extends Sprite {		// Public Properties:  	public var attention:uint;  	public var meditation:uint;  	public var poorSignal:uint;    	private var thinkGearSocket : Socket;		public function DisplayWindow() {			thinkGearSocket =  new Socket();			thinkGearSocket.addEventListener ( ProgressEvent.SOCKET_DATA, dataHandler);			thinkGearSocket.connect("127.0.0.1", 13854);						var configuration : Object = new Object();      		configuration["enableRawOutput"] = false;      		configuration["format"] = "Json";	        		thinkGearSocket.writeUTFBytes(JSON.encode(configuration));		}			    // Protected Methods:    private function dataHandler(e : ProgressEvent){		      var packetString : String = thinkGearSocket.readUTFBytes(thinkGearSocket.bytesAvailable);      thinkGearSocket.flush();      var packets : Array = packetString.split(/\r/);      var data:Object;                                    //temporary data      for each (var packet:String in packets){            //iterate through each element        if(packet != "") {                                //sometimes the line is blank so skip the line          try {	              data = JSON.decode(packet);//decode the data to an array                 } catch (jError:JSONParseError) {            //do error handling here          }                     	  					if(data["poorSignalLevel"] != null) {           //checking to see if the ''poorSignalLevel' key exists	    		poorSignal = data["poorSignalLevel"];         	    		if(poorSignal == 0) {              		attention = data["eSense"]["attention"];    //assigning data to variables	      			meditation = data["eSense"]["meditation"];							      			trace(attention);			          //output attention data to debug           		 }            	else {              		if(poorSignal == 200) {                		attention = 0;                		meditation = 0;              		}           		 }	  	    }       }	   data = null;		label1.text = " Attention: " + attention.toString() + "\nMeditation: " + meditation.toString() + "\nPoor Signal: " + poorSignal.toString(); 	}  }	}}